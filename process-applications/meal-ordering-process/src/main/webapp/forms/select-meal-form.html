<strong>Here you would put the actual form to work on the task</strong>

<p>
  You can use this form through Camunda Tasklist
  by setting the formKey of a BPMN User Task to:
  <code>embedded:app:forms/select-meal-form.html</code>
</p>

<form class="form-horizontal">
<h3>Training: {{training.trainingID}} start: {{training.startDate}} end: {{training.endDate}}</h3>
<h3>Select Meal for {{weekday}} at {{location}}</h3>
 <div class="control-group">
    <label class="control-label">Your choice</label>
    <div class="controls">
      <select ng-model="meal" class="form-control"
        cam-variable-type="String">
        <option>Wiener Schnitzel</option>
        <option>Martktsalat</option>
        <option>Sp√§tzle</option>
      </select>
    </div>
  </div>
  <input type="hidden" cam-variable-name="weekday">
  <input type="hidden" cam-variable-name="location">

  <script cam-script type="text/form-script">
  inject(['$http', 'Uri', function($http, Uri) {
    console.log("inject");
    camForm.on('form-loaded', function() {
      $http.get(Uri.appUri("engine://engine/:engine/task/" + camForm.taskId)).success(function(result){
        console.log(result.executionId);
        $scope.executionId = result.executionId;
      });
    });
    camForm.on('submit', function(evt) {
      var req = {
        method: 'PUT',
        url: Uri.appUri("engine://engine/:engine/execution/" + $scope.executionId 
            + "/localVariables/meal"),
        headers: {
            'Content-Type': 'application/json'
        },
        data: {"value": $scope.meal, "type":"String"}
      };
      console.log(req);
      $http(req)
        .success(function(response) {})
        .error(function(response) {
            alert("error: " + response.data.message);
        });
      });
  }]);
  camForm.on('form-loaded', function() {
    // tell the form SDK to fetch the variable named 'training'
    camForm.variableManager.fetchVariable('training');
    camForm.variableManager.fetchVariable('participants');
  });
  camForm.on('variables-fetched', function() {
    // work with the variable (bind it to the current AngularJS $scope)
    $scope.training = camForm.variableManager.variableValue('training');
    $scope.participants = camForm.variableManager.variableValue('participants');
  });
  </script>
</form>